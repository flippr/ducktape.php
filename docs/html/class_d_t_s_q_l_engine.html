<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>DuckTape: DTSQLEngine Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&nbsp;Structure&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Data&nbsp;Fields</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-static-methods">Static Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<h1>DTSQLEngine Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="DTSQLEngine" --><table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_t_s_q_l_engine.html#acd4bef3364843f199a8b3d1c1f7ae14d">__construct</a> (<a class="el" href="interface_d_t_s_q_l_engine_delegate.html">DTSQLEngineDelegate</a> $delegate)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_t_s_q_l_engine.html#adfd7efb2c68696739769cd80f01c9ce3">runSQL</a> ($sql)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_t_s_q_l_engine.html#a0da4d2eee6d15550737de27a3e96c4c5">qualifiedTableAndIndex</a> ($table, &amp;$index_table)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_t_s_q_l_engine.html#a2d654ff34b026a96f4cbd5c1d65bb71f">joinWith</a> ($left, $parsed_join, &amp;$index_table)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_t_s_q_l_engine.html#a66ff705bbe6bc7bbb43cc30955a1a173">buildWhitelist</a> (array $whitelisted, $parsed_select, &amp;$results)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_t_s_q_l_engine.html#a714c31c5238bfcf22bc421ac907bb119">selectColumnsFromResults</a> ($whitelisted, &amp;$results)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_t_s_q_l_engine.html#a844838272a0d13c96a0f0375ceb4ea5f">limitResults</a> (&amp;$final, $parsed_limit)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_t_s_q_l_engine.html#ab747968cd15b9f40b6f751fc788a88f8">sortResults</a> (&amp;$final, $parsed_order)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_t_s_q_l_engine.html#a82297efc1414bb7e85b576337ab2e64a">evaluateExpressionForRow</a> ($expr_tree, $row)</td></tr>
<tr><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_t_s_q_l_engine.html#ab693e997fdc379933cde1195e9d68634">tableFromFQCN</a> ($col)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_t_s_q_l_engine.html#acebcf3dc9be3a76cccc31a5677e6c9d7">columnFromFQCN</a> ($col)</td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_t_s_q_l_engine.html#a6ba63bbeda695427672d87daca4fa2c2">handleParsedSQL</a> ($parsed, &amp;$index_table)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_t_s_q_l_engine.html#a6391de55d369904d4c7b9dc0233e8037">filterResults</a> (&amp;$results, $parsed_expr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_t_s_q_l_engine.html#a726e6363d0e389f33c2c6a50cadea5a9">buildExpressionTree</a> ($parsed_expr)</td></tr>
<tr><td colspan="2"><h2><a name="pro-static-methods"></a>
Static Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_t_s_q_l_engine.html#a592704a3eedd20585ab82724c101da19">fullyQualifiedColumnName</a> ($results, $col)</td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_t_s_q_l_engine.html#aace838b726f4caf1c450f5cbd3fa512e">$delegate</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>turns out the 3rd-party parser is really more of a tokenizer, Since we would have to handle our own operation precedence, etc. it makes more sense to implement our own SQL Parser at some point. Until then, this class is not operational. </dd></dl>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="acd4bef3364843f199a8b3d1c1f7ae14d"></a><!-- doxytag: member="DTSQLEngine::__construct" ref="acd4bef3364843f199a8b3d1c1f7ae14d" args="(DTSQLEngineDelegate $delegate)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__construct </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interface_d_t_s_q_l_engine_delegate.html">DTSQLEngineDelegate</a> $&nbsp;</td>
          <td class="paramname"> <em>delegate</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a726e6363d0e389f33c2c6a50cadea5a9"></a><!-- doxytag: member="DTSQLEngine::buildExpressionTree" ref="a726e6363d0e389f33c2c6a50cadea5a9" args="($parsed_expr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">buildExpressionTree </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>parsed_expr</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>generates a tree-structure from a parsed expression </p>

</div>
</div>
<a class="anchor" id="a66ff705bbe6bc7bbb43cc30955a1a173"></a><!-- doxytag: member="DTSQLEngine::buildWhitelist" ref="a66ff705bbe6bc7bbb43cc30955a1a173" args="(array $whitelisted, $parsed_select, &amp;$results)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">buildWhitelist </td>
          <td>(</td>
          <td class="paramtype">array $&nbsp;</td>
          <td class="paramname"> <em>whitelisted</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>parsed_select</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&amp;$&nbsp;</td>
          <td class="paramname"> <em>results</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="acebcf3dc9be3a76cccc31a5677e6c9d7"></a><!-- doxytag: member="DTSQLEngine::columnFromFQCN" ref="acebcf3dc9be3a76cccc31a5677e6c9d7" args="($col)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static columnFromFQCN </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>col</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="return"><dt><b>Returns:</b></dt><dd>returns only the column name after any table-name qualifiers </dd></dl>

</div>
</div>
<a class="anchor" id="a82297efc1414bb7e85b576337ab2e64a"></a><!-- doxytag: member="DTSQLEngine::evaluateExpressionForRow" ref="a82297efc1414bb7e85b576337ab2e64a" args="($expr_tree, $row)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">evaluateExpressionForRow </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>expr_tree</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>row</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>evaluates the expression tree for a given row </p>

</div>
</div>
<a class="anchor" id="a6391de55d369904d4c7b9dc0233e8037"></a><!-- doxytag: member="DTSQLEngine::filterResults" ref="a6391de55d369904d4c7b9dc0233e8037" args="(&amp;$results, $parsed_expr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">filterResults </td>
          <td>(</td>
          <td class="paramtype">&amp;$&nbsp;</td>
          <td class="paramname"> <em>results</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>parsed_expr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>results</em>&nbsp;</td><td>- the current result sets </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>parsed_expr</em>&nbsp;</td><td>- a parsed SQL expression to filter via evaluation </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a592704a3eedd20585ab82724c101da19"></a><!-- doxytag: member="DTSQLEngine::fullyQualifiedColumnName" ref="a592704a3eedd20585ab82724c101da19" args="($results, $col)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static fullyQualifiedColumnName </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>results</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>col</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a6ba63bbeda695427672d87daca4fa2c2"></a><!-- doxytag: member="DTSQLEngine::handleParsedSQL" ref="a6ba63bbeda695427672d87daca4fa2c2" args="($parsed, &amp;$index_table)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">handleParsedSQL </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>parsed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&amp;$&nbsp;</td>
          <td class="paramname"> <em>index_table</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>-</em>&nbsp;</td><td>index_table on return, this contains the index table for the results </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a2d654ff34b026a96f4cbd5c1d65bb71f"></a><!-- doxytag: member="DTSQLEngine::joinWith" ref="a2d654ff34b026a96f4cbd5c1d65bb71f" args="($left, $parsed_join, &amp;$index_table)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">joinWith </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>left</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>parsed_join</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&amp;$&nbsp;</td>
          <td class="paramname"> <em>index_table</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>produces a row x col result set of the combination of the left and right tables </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>index_table</em>&nbsp;</td><td>- on return, this contains the index table for the results </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>returns a 2D result set of the joined tables </dd></dl>

</div>
</div>
<a class="anchor" id="a844838272a0d13c96a0f0375ceb4ea5f"></a><!-- doxytag: member="DTSQLEngine::limitResults" ref="a844838272a0d13c96a0f0375ceb4ea5f" args="(&amp;$final, $parsed_limit)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">limitResults </td>
          <td>(</td>
          <td class="paramtype">&amp;$&nbsp;</td>
          <td class="paramname"> <em>final</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>parsed_limit</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a0da4d2eee6d15550737de27a3e96c4c5"></a><!-- doxytag: member="DTSQLEngine::qualifiedTableAndIndex" ref="a0da4d2eee6d15550737de27a3e96c4c5" args="($table, &amp;$index_table)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">qualifiedTableAndIndex </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&amp;$&nbsp;</td>
          <td class="paramname"> <em>index_table</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="return"><dt><b>Returns:</b></dt><dd>returns the rows from the table named +table+ and populates index_table </dd></dl>

</div>
</div>
<a class="anchor" id="adfd7efb2c68696739769cd80f01c9ce3"></a><!-- doxytag: member="DTSQLEngine::runSQL" ref="adfd7efb2c68696739769cd80f01c9ce3" args="($sql)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">runSQL </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>sql</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>runs a series of SQL statements </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>returns the result of the last statement </dd></dl>

</div>
</div>
<a class="anchor" id="a714c31c5238bfcf22bc421ac907bb119"></a><!-- doxytag: member="DTSQLEngine::selectColumnsFromResults" ref="a714c31c5238bfcf22bc421ac907bb119" args="($whitelisted, &amp;$results)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">selectColumnsFromResults </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>whitelisted</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&amp;$&nbsp;</td>
          <td class="paramname"> <em>results</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ab747968cd15b9f40b6f751fc788a88f8"></a><!-- doxytag: member="DTSQLEngine::sortResults" ref="ab747968cd15b9f40b6f751fc788a88f8" args="(&amp;$final, $parsed_order)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sortResults </td>
          <td>(</td>
          <td class="paramtype">&amp;$&nbsp;</td>
          <td class="paramname"> <em>final</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>parsed_order</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ab693e997fdc379933cde1195e9d68634"></a><!-- doxytag: member="DTSQLEngine::tableFromFQCN" ref="ab693e997fdc379933cde1195e9d68634" args="($col)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static tableFromFQCN </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>col</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="return"><dt><b>Returns:</b></dt><dd>the table name, or false </dd></dl>

</div>
</div>
<hr/><h2>Field Documentation</h2>
<a class="anchor" id="aace838b726f4caf1c450f5cbd3fa512e"></a><!-- doxytag: member="DTSQLEngine::$delegate" ref="aace838b726f4caf1c450f5cbd3fa512e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$delegate<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>modules/stores/files/<a class="el" href="_d_t_s_q_l_engine_8class_8php.html">DTSQLEngine.class.php</a></li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Sat Dec 14 2013 16:16:06 for DuckTape by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
